<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>å…¬ç´„æ•°ã‚’è¦‹ã¤ã‘ã‚ˆã†ï¼ï¼ˆç¸¦å›ºå®šï¼‰</title>
<style>
  :root{
    --chip: clamp(44px, 9vw, 80px);        /* ã‚¿ã‚¤ãƒ«ã®æœ€å°ä¸€è¾º */
    --gap: clamp(6px, 1.8vw, 14px);        /* ã‚°ãƒªãƒƒãƒ‰é–“éš” */
    --pad: clamp(10px, 2.4vw, 20px);       /* å…¨ä½“ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚° */
    --radius: 18px;
    --shadow: 0 8px 22px rgba(0,0,0,.06);

    --bg:#f7f8fb; --ink:#111827; --muted:#6b7280; --card:#ffffff; --border:#e5e7eb;
    --accent:#2563eb;

    --hit:#10b981;           /* å…¬ç´„æ•°ï¼ˆç·‘ï¼‰ */
    --hit-border:#065f46;

    --divA-bg:#fff7cc;       /* æ•°ï¼‘ã®ç´„æ•°ï¼ˆè–„ã„é»„è‰²ï¼‰ */
    --divA-bd:#f2cf4a;
    --divB-bg:#ffe4ec;       /* æ•°ï¼’ã®ç´„æ•°ï¼ˆè–„ã„ãƒ”ãƒ³ã‚¯ï¼‰ */
    --divB-bd:#f3a9bf;
  }
  *{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
  html,body{height:100%}
  body{
    margin:0; font-family:"Inter","BIZ UDPGothic","Hiragino Kaku Gothic ProN",system-ui,sans-serif;
    background:var(--bg); color:var(--ink);
    padding: var(--pad);
  }
  .wrap{max-width:1000px; margin:0 auto}
  .card{
    background:var(--card); border:1px solid var(--border);
    border-radius:var(--radius); box-shadow:var(--shadow);
    padding: var(--pad);
  }
  h1{font-size:clamp(20px, 4.8vw, 32px); margin:.2em 0 .6em}

  .row{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
  .grow{flex:1}
  .picker{
    display:flex; align-items:center; gap:8px;
    background:#fff; border:1px solid var(--border); border-radius:14px; padding:8px;
    min-width:min(100%, 520px);
  }
  .picker label{font-weight:700; color:#111; min-width:3em; font-size:clamp(14px,2.8vw,18px)}
  .nbox{
    display:flex; align-items:center; gap:8px;
    background:#f9fafb; border:1px solid var(--border); border-radius:12px; padding:6px;
    margin-left:auto;
  }
  .nbox input{
    width: clamp(88px, 18vw, 120px);
    font-size: clamp(18px, 4.5vw, 22px);
    padding:10px 12px; border:1px solid var(--border); border-radius:10px;
    -moz-appearance: textfield;
  }
  .nbox input::-webkit-outer-spin-button,
  .nbox input::-webkit-inner-spin-button{ -webkit-appearance: none; margin: 0; }
  .nbox button{
    width: clamp(44px, 9vw, 56px); height: clamp(44px, 9vw, 56px);
    border-radius:12px; border:1px solid var(--border); background:#fff;
    font-size: clamp(18px, 5vw, 22px); cursor:pointer;
    display:grid; place-items:center;
  }
  .nbox button:active{transform:scale(.98)}

  /* æ“ä½œãƒœã‚¿ãƒ³ç¾¤ï¼ˆå¸¸ã«è¦‹ãˆã‚‹ï¼‰ */
  .actions{
    position: sticky; top: calc(env(safe-area-inset-top) + 6px);
    background:linear-gradient(#fff, #fff0);
    padding-top:6px; padding-bottom:6px;
    display:flex; gap:10px; flex-wrap:wrap; z-index:10;
  }
  .btn{
    appearance:none; border:none; cursor:pointer;
    background:var(--accent); color:#fff; font-weight:700;
    padding: clamp(12px, 2.6vw, 16px) clamp(14px, 3vw, 18px);
    border-radius:14px; font-size: clamp(16px, 3.8vw, 18px);
    min-height: clamp(44px, 9vw, 56px);
  }
  .btn.secondary{background:#fff; color:#111; border:1px solid var(--border)}
  .btn:active{transform:translateY(1px)}

  /* â˜… ç¸¦å›ºå®šï¼šå¸¸ã«ä¸Šä¸‹ã«ä¸¦ã¹ã‚‹ï¼ˆä¸€åˆ—ã‚°ãƒªãƒƒãƒ‰ï¼‰ */
  .panes{
    display:grid; gap: var(--gap);
    grid-template-columns: 1fr;  /* â† ä¸€åˆ—ã«å›ºå®š */
  }

  .label{
    font-weight:700; color:#111; margin:14px 0 8px;
    display:flex; align-items:center; gap:8px; font-size: clamp(14px,3.2vw,16px);
  }
  .legend{display:flex; gap:10px; align-items:center; font-size:clamp(12px,3vw,14px); color:var(--muted)}
  .legend .box{width:14px; height:14px; border-radius:4px; border:1px solid var(--border)}
  .legend .y{background:var(--divA-bg); border-color:var(--divA-bd)}
  .legend .p{background:var(--divB-bg); border-color:var(--divB-bd)}
  .legend .g{background:#ecfdf5; border-color:var(--hit-border)}

  .grid{
    display:grid; gap: var(--gap);
    grid-template-columns: repeat(auto-fill, minmax(var(--chip), 1fr));
  }
  .chip{
    display:inline-flex; align-items:center; justify-content:center;
    min-width: var(--chip); min-height: var(--chip);
    background:#fff; border:2px solid #e5e7eb; border-radius:12px;
    font-size: clamp(18px, 4.6vw, 22px); user-select:none;
  }
  .chip.divA{ background: var(--divA-bg); border-color: var(--divA-bd); }
  .chip.divB{ background: var(--divB-bg); border-color: var(--divB-bd); }
  .chip.hit{
    background:#ecfdf5 !important; border-color: var(--hit-border) !important; color:#065f46;
    box-shadow: inset 0 0 0 3px var(--hit);
    text-decoration: underline; text-decoration-thickness: 3px;
  }

  .result{
    background:#f8fafc; border:1px dashed var(--border); border-radius:14px;
    padding:12px; margin-top:14px; color:#111; font-size: clamp(14px,3.4vw,16px);
  }
  .result b{display:inline-block; margin-right:6px}
  .empty{color:var(--muted)}
  .footer{color:var(--muted); font-size:clamp(12px,3vw,14px); margin-top:10px}
</style>
</head>
<body>
  <div class="wrap">
    <h1>å…¬ç´„æ•°ã‚’è¦‹ã¤ã‘ã‚ˆã†ï¼</h1>

    <div class="card" role="group" aria-label="å…¥åŠ›ã‚¨ãƒªã‚¢">
      <!-- å…¥åŠ› -->
      <div class="row" style="margin-bottom:10px">
        <div class="picker grow">
          <label for="a">æ•°ï¼‘</label>
          <div class="nbox">
            <button type="button" aria-label="æ•°ï¼‘ã‚’1ã¸ã‚‰ã™" onclick="step('a',-1)">âˆ’</button>
            <input id="a" type="number" min="1" value="2" inputmode="numeric" oninput="clamp('a'); render()">
            <button type="button" aria-label="æ•°ï¼‘ã‚’1ãµã‚„ã™" onclick="step('a',1)">ï¼‹</button>
          </div>
        </div>
        <div class="picker grow">
          <label for="b">æ•°ï¼’</label>
          <div class="nbox">
            <button type="button" aria-label="æ•°ï¼’ã‚’1ã¸ã‚‰ã™" onclick="step('b',-1)">âˆ’</button>
            <input id="b" type="number" min="1" value="3" inputmode="numeric" oninput="clamp('b'); render()">
            <button type="button" aria-label="æ•°ï¼’ã‚’1ãµã‚„ã™" onclick="step('b',1)">ï¼‹</button>
          </div>
        </div>
      </div>

      <!-- æ“ä½œï¼ˆå¸¸ã«è¦‹ãˆã‚‹ï¼‰ -->
      <div class="actions">
        <button class="btn" onclick="findCommon()">ğŸŸ¢ å…¬ç´„æ•°ã‚’è¦‹ã¤ã‘ã‚‹</button>
        <button class="btn secondary" onclick="resetAll()">ğŸ”„ ãƒªã‚»ãƒƒãƒˆ</button>
      </div>

      <!-- â˜… è¡¨ç¤ºãƒ‘ãƒãƒ«ï¼ˆç¸¦å›ºå®šï¼šæ•°ï¼‘ãŒä¸Šã€æ•°ï¼’ãŒä¸‹ï¼‰ -->
      <div class="panes">
        <section>
          <div class="label">
            æ•°ï¼‘ï¼ˆ1 ã€œ <span id="amax">12</span>ï¼‰
            <span class="legend" aria-hidden="true">
              <span class="box y"></span>æ•°ï¼‘ã®ç´„æ•°
              <span class="box g"></span>å…¬ç´„æ•°ï¼ˆç·‘ã®å¼·èª¿ï¼‰
            </span>
          </div>
          <div id="gridA" class="grid" aria-live="polite"></div>
        </section>

        <section>
          <div class="label">
            æ•°ï¼’ï¼ˆ1 ã€œ <span id="bmax">18</span>ï¼‰
            <span class="legend" aria-hidden="true">
              <span class="box p"></span>æ•°ï¼’ã®ç´„æ•°
              <span class="box g"></span>å…¬ç´„æ•°ï¼ˆç·‘ã®å¼·èª¿ï¼‰
            </span>
          </div>
          <div id="gridB" class="grid" aria-live="polite"></div>
        </section>
      </div>

      <!-- çµæœ -->
      <div class="result" id="resultBox" aria-live="polite">
        <div id="listLine" class="empty">å…¬ç´„æ•°ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</div>
        <div id="gcdLine" class="empty">æœ€å¤§å…¬ç´„æ•°ï¼šâ€”</div>
      </div>

      <div class="footer">
        è–„ã„è‰²ã¯å„æ®µã®ã€Œç´„æ•°ã€ã€‚ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€Œå…¬ç´„æ•°ã€ãŒç·‘ã«ãªã‚‹ã€‚
      </div>
    </div>
  </div>

<script>
  const gridA = document.getElementById('gridA');
  const gridB = document.getElementById('gridB');
  const amax = document.getElementById('amax');
  const bmax = document.getElementById('bmax');
  const listLine = document.getElementById('listLine');
  const gcdLine = document.getElementById('gcdLine');

  function val(id){ return Math.max(1, parseInt(document.getElementById(id).value || "1",10)); }
  function clamp(id){
    const el = document.getElementById(id);
    if(!el.value || +el.value < 1) el.value = 1;
  }
  function step(id, delta){
    const el = document.getElementById(id);
    el.value = Math.max(1, (parseInt(el.value||"1",10) + delta));
    render();
  }

  function makeRow(n, target){
    target.innerHTML = "";
    for(let i=1;i<=n;i++){
      const d = document.createElement('div');
      d.className = 'chip'; d.textContent = i;
      d.dataset.v = i;
      target.appendChild(d);
    }
  }

  function paintDivisors(a,b){
    // ãƒªã‚»ãƒƒãƒˆ
    [...gridA.children, ...gridB.children].forEach(ch=>{
      ch.classList.remove('divA','divB','hit');
    });
    // æ•°ï¼‘ã®ç´„æ•°ï¼ˆè–„ã„é»„è‰²ï¼‰
    for(let i=1;i<=a;i++){
      if(a % i === 0){
        const el = gridA.children[i-1];
        if(el) el.classList.add('divA');
      }
    }
    // æ•°ï¼’ã®ç´„æ•°ï¼ˆè–„ã„ãƒ”ãƒ³ã‚¯ï¼‰
    for(let i=1;i<=b;i++){
      if(b % i === 0){
        const el = gridB.children[i-1];
        if(el) el.classList.add('divB');
      }
    }
  }

  function highlightCommon(a,b){
    // æ—¢å­˜ã®hitã ã‘å¤–ã™ï¼ˆdivA/divBã¯æ®‹ã™ï¼‰
    [...gridA.children, ...gridB.children].forEach(ch => ch.classList.remove('hit'));

    const commons = [];
    const limit = Math.min(a,b);
    for(let i=1;i<=limit;i++){
      if(a % i === 0 && b % i === 0) commons.push(i);
    }
    for(const c of commons){
      const A = gridA.children[c-1];
      const B = gridB.children[c-1];
      if(A) A.classList.add('hit');
      if(B) B.classList.add('hit');
    }
    // çµæœ
    if(commons.length){
      listLine.classList.remove('empty');
      listLine.innerHTML = `<b>å…¬ç´„æ•°ï¼š</b> ${commons.join('ã€')}`;
      gcdLine.classList.remove('empty');
      gcdLine.innerHTML = `<b>æœ€å¤§å…¬ç´„æ•°ï¼š</b> ${commons[commons.length-1]}`;
    }else{
      listLine.classList.remove('empty');
      listLine.textContent = "å…¬ç´„æ•°ï¼šãªã—";
      gcdLine.classList.remove('empty');
      gcdLine.textContent = "æœ€å¤§å…¬ç´„æ•°ï¼šâ€”";
    }
  }

  function render(){
    const a = val('a'), b = val('b');
    amax.textContent = a; bmax.textContent = b;
    makeRow(a, gridA);
    makeRow(b, gridB);
    paintDivisors(a,b);
    // æœªåˆ¤å®šæ–‡è¨€ã¸
    listLine.classList.add('empty');
    gcdLine.classList.add('empty');
    listLine.textContent = "å…¬ç´„æ•°ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚";
    gcdLine.textContent = "æœ€å¤§å…¬ç´„æ•°ï¼šâ€”";
  }

  function findCommon(){ highlightCommon(val('a'), val('b')); }

  function resetAll(){
    document.getElementById('a').value = 12;
    document.getElementById('b').value = 18;
    render();
    window.scrollTo({top:0, behavior:'smooth'});
  }

  // åˆæœŸåŒ–
  render();
</script>
</body>
</html>
